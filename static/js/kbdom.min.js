window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var nextDropdownId=0,kbDom={whenReady:function(cb){"loading"!=document.readyState?cb():document.addEventListener("DOMContentLoaded",cb)},getJSON:function(url,cb){var req=new XMLHttpRequest;req.open("GET",url),req.onload=function(){if(this.status>=200&&this.status<400)try{cb(JSON.parse(this.response))}catch(err){console.error(err)}},req.send()},matches:function(selector,el){return(el.matches||el.matchesSelector||el.msMatchesSelector||el.mozMatchesSelector||el.webkitMatchesSelector||el.oMatchesSelector).call(el,selector)},closest:function(selector,startEl){for(var nextEl=startEl;nextEl;){if(kbDom.matches(selector,nextEl))return nextEl;nextEl=nextEl.parentElement}return null},animateScroll:function(el,targetVal,duration){var startTime=(new Date).getTime(),startVal=el.scrollTop,totalDelta=targetVal-startVal;!function scroll(){var timeElapsed=(new Date).getTime()-startTime,easingFactor=function(completion){return.5-Math.cos(completion*Math.PI)/2}(Math.max(1,timeElapsed/duration)),newValue=startVal+totalDelta*easingFactor;el.scrollTop=newValue,easingFactor<1&&requestAnimationFrame(scroll)}()},siblings:function(el,selector){return Array.prototype.filter.call(el.parentElement.children,(function(child){return child!==el&&(!selector||kbDom.matches(selector,child))}))},outerHeight:function(el,includeMargin){var height=el.offsetHeight;if(includeMargin){var style=getComputedStyle(el);height+=parseInt(style.marginTop)+parseInt(style.marginBottom)}return height},toggleClass:function(targetEl,className,force){null!=force?force?targetEl.classList.add(className):targetEl.classList.remove(className):targetEl.classList.toggle(className)},initDropdown:function(el){var anchorEl=el;if(el){var contentsElName=el.dataset.kbuiDropdownContents;if(contentsElName){var contentsEl=document.querySelector('[data-kbui-dropdown-name="'+contentsElName+'"]');if(contentsEl){var wrapper=function(){var wrapper=document.createElement("div");return wrapper.id="kbui-dropdown-"+nextDropdownId++,wrapper.style.position="absolute",wrapper.style.zIndex="1111",wrapper.style.top="0px",wrapper.style.left="0px",wrapper.appendChild(contentsEl),wrapper}();anchorEl.addEventListener("click",(function(){contentsEl.className.indexOf("dropdown-open")>=0?closeDropdown():openDropdown()})),document.body.addEventListener("click",(function(e){contentsEl.className.indexOf("dropdown-open")>=0&&!anchorEl.parentElement.contains(e.target)&&!wrapper.contains(e.target)&&closeDropdown()}))}else console.warn('Could not find dropdown contents element for kbui-dropdown-name "'+contentsElName+'"')}else console.warn("Attempted to initialize dropdown on element with no kbui-dropdown-contents attribute.")}function closeDropdown(){contentsEl.classList.remove("dropdown-open"),document.body.removeChild(wrapper)}function openDropdown(){var anchorPosition,anchorBottom,anchorLeft;anchorPosition=anchorEl.getBoundingClientRect(),anchorBottom=Math.round(anchorPosition.bottom+window.scrollY),anchorLeft=Math.round(anchorPosition.left+window.scrollX),wrapper.style.transform="translateX("+anchorLeft+"px) translateY("+anchorBottom+"px) translateZ(0px)",contentsEl.classList.add("dropdown-open"),document.body.appendChild(wrapper)}}};